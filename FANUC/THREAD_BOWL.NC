O0001 (PROGRAMA DE MECANIZADO DE ROSCA)
(PARAMETROS)
#100 = 0.3    (INCREMENTO POR CICLO)
#101 = -460   (LONGITUD DEL CICLO)
#102 = 29.6   (DISTANCIA ENTRE FLANCOS)
#103 = 26.2   (ALTURA DEL FILETE)
#104 = 0.3    (PENETRACION POR CICLO)
#105 = 6      (INCREMENTO EN VERTICAL)
#106 = 2      (DIRECCION DEL ANGULO 1=NEGATIVO 2=POSITIVO)
#107 = 50.8   (PASO DE LA ROSCA)
#108 = 20     (DISTANCIA SEGURIDAD RETORNO HERRAMIENTA)

(VARIABLES DE TRABAJO)
#120 = 0      (PROFUNDIDAD ACTUAL)
#121 = 0      (POSICIÓN VERTICAL)
#122 = 0      (PROFUNDIDAD OBJETIVO DEL CICLO)

G18 G90 G20 G95
G54 
T0101
S18 M03

(CICLO PRINCIPAL DE MECANIZADO)
N1000 (INCREMENTO DE PROFUNDIDAD OBJETIVO)
#122 = #122 + #100
IF [#122 GT #103] THEN #122 = #103

N2000 (CICLOS DE PENETRACIÓN GRADUAL)
#120 = #120 + #104
IF [#120 GT #122] THEN #120 = #122
G00 X0 Z0

(POSICIONAMIENTO SEGÚN DIRECCIÓN DEL ÁNGULO)
IF [#106 EQ 2] THEN GOTO 2100
G00 X[-#120] Z[-#120]
GOTO 2200
N2100
G00 X[-#120] Z[#120]
N2200

(MECANIZADO DE ROSCA)
G33 Z#101 K#107
G00 X#108
G00 Z0

IF [#120 LT #122] THEN GOTO 2000

(CICLOS DE ENSANCHAMIENTO)
#121 = #120
N3000
#121 = #121 + #105
IF [#121 GT #102] THEN #121 = #102
G00 X[-#120]

(POSICIONAMIENTO SEGÚN DIRECCIÓN DEL ÁNGULO)
IF [#106 EQ 2] THEN GOTO 3100
G00 Z[-#121]
GOTO 3200
N3100
G00 Z[#121]
N3200

(MECANIZADO DE ROSCA)
G33 Z#101 K#107
G00 X#108
G00 Z0

IF [#121 LT #102] THEN GOTO 3000

IF [#122 LT #103] THEN GOTO 1000

M30
(FIN DE PROGRAMA)